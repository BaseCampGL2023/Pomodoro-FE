<div class="container">
  <h2 class="title">My monthly statistics</h2>
  <div class="date-group">
    <div class="control active-btn" (click)="dateInputLeftArrowClick()">
      <img
        class="icon"
        src="assets/icons/left-arrow-active.svg"
        alt="Left arrow icon"
      />
    </div>
    <div class="date-input" (click)="openDatePicker()">
      <span class="label">{{ selectedMonth | date : "MMM y" }}</span>
      <div class="date-picker">
        <input
          class="hidden"
          matInput
          [max]="maxDate"
          [matDatepicker]="picker"
          [(ngModel)]="selectedMonth"
        />
        <mat-datepicker-toggle matSuffix [for]="picker">
          <mat-icon matDatepickerToggleIcon>
            <img class="icon" src="assets/icons/calendar.svg" alt="Calendar" />
          </mat-icon>
        </mat-datepicker-toggle>
        <mat-datepicker
          #picker
          startView="year"
          (monthSelected)="monthSelected($event, picker)"
        ></mat-datepicker>
      </div>
    </div>
    <div
      class="control {{ dateInputRightArrowState }}-btn"
      (click)="dateInputRightArrowClick()"
    >
      <img
        class="icon"
        src="assets/icons/right-arrow-{{ dateInputRightArrowState }}.svg"
        alt="Right arrow icon"
      />
    </div>
  </div>
  <div class="statistics">
    <span class="label">Pomodoro (times)</span>
    <div class="chart-group">
      <div class="y-axis">
        <span *ngFor="let p of pomodoroTimesAxis" class="label chart-label">{{
          p
        }}</span>
      </div>
      <div class="chart">
        <div
          *ngFor="let analytics of annualStatistics?.analyticsPerMonths"
          class="bar-group"
          style="--height: {{ calcBarHeight(analytics.pomodorosDone) }}%"
        >
          <div
            class="bar"
            matTooltip="Overall: {{ analytics.pomodorosDone }} times"
            matTooltipPosition="above"
            matTooltipClass="bar-info-tooltip"
            matTooltipShowDelay="100"
            matTooltipHideDelay="100"
          ></div>
          <span class="label chart-label x-val">{{
            Month[analytics.month]
          }}</span>
        </div>
      </div>
    </div>
    <span class="label d-flex justify-content-end">Month</span>
  </div>
</div>
